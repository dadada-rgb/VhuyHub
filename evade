local a = game:GetService("Players")
local b = game:GetService("VirtualUser")
local c = game:GetService("ReplicatedStorage")
local d = game:GetService("UserInputService")
local e = game:GetService("RunService")
local f = game:GetService("TweenService")
local g = a.LocalPlayer
local h = g.Character or g.CharacterAdded:Wait()
local i = { j = false, k = false, l = false }
local m = {}
local n = false

g.Idled:Connect(function()
    pcall(function()
        b:CaptureController()
        b:ClickButton2(Vector2.new())
    end)
end)

task.spawn(function()
    while true do
        local o = nil
        for _, p in pairs(workspace.Game.Players:GetChildren()) do
            if p:GetAttribute("Downed") then o = p break end
        end
        if o and o:FindFirstChild("HumanoidRootPart") then
            local q = g.Character
            if q and q:FindFirstChild("HumanoidRootPart") then
                q.HumanoidRootPart.CFrame = CFrame.new(o.HumanoidRootPart.Position + Vector3.new(0, 3, 0))
                pcall(function() c.Events.Revive.RevivePlayer:FireServer(tostring(o), true) end)
            end
        end
        task.wait(math.random(80, 120) / 1000)
    end
end)

e.Stepped:Connect(function()
    local q = g.Character
    if q and q:GetAttribute("Downed") then
        pcall(function() c.Events.Player.ChangePlayerMode:FireServer(true) end)
        task.wait(math.random(600, 1600) / 1000)
    end
end)

task.spawn(function()
    local r = workspace.Game and workspace.Game.Effects and workspace.Game.Effects.Tickets
    if not r then return end
    while true do
        if i.j then
            local q = g.Character or g.CharacterAdded:Wait()
            local s = q:FindFirstChild("HumanoidRootPart")
            if s then
                for _, t in ipairs(r:GetChildren()) do
                    local u = t:FindFirstChild("HumanoidRootPart")
                    if u then
                        local v = TweenInfo.new(math.random(400, 800) / 1000, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
                        local w = f:Create(s, v, {CFrame = u.CFrame + Vector3.new(math.random(-5, 5) / 10, 3, math.random(-5, 5) / 10)})
                        w:Play()
                        w.Completed:Wait()
                        task.wait(math.random(150, 350) / 1000)
                    end
                end
            end
        end
        task.wait(math.random(900, 1300) / 1000)
    end
end)

d.InputBegan:Connect(function(x, y)
    if n and not y and x.KeyCode == Enum.KeyCode.Space then
        local q = g.Character
        local z = q and q:FindFirstChildOfClass("Humanoid")
        if z and z:GetState() ~= Enum.HumanoidStateType.Jumping and z:GetState() ~= Enum.HumanoidStateType.Freefall and z.FloorMaterial ~= Enum.Material.Air then
            z:ChangeState("Jumping")
            task.wait(math.random(120, 220) / 1000)
        end
    end
end)

task.spawn(function()
    while true do
        if i.l then
            local q = g.Character
            local z = q and q:FindFirstChildOfClass("Humanoid")
            if z and z.WalkSpeed > 30 and z:GetState() == Enum.HumanoidStateType.Running and z.MoveDirection.Magnitude > 0 and z.FloorMaterial ~= Enum.Material.Air then
                z:ChangeState("Jumping")
                task.wait(math.random(60, 160) / 1000)
            end
        end
        task.wait(math.random(40, 60) / 1000)
    end
end)

d.InputBegan:Connect(function(x, y)
    if not y and x.UserInputType == Enum.UserInputType.MouseButton3 then
        i.l = not i.l
        aa.Text = "Bhop (" .. (i.l and "On" or "Off") .. ")"
    end
end)

local function ab()
    for _, ac in ipairs(m) do pcall(function() ac:Disconnect() end) end
    m = {}
    for _, ad in ipairs(a:GetPlayers()) do
        if ad.Character then
            local ae = ad.Character:FindFirstChild("Head")
            if ae and ae:FindFirstChild("x3z9q") then
                pcall(function() ae.x3z9q:Destroy() end)
            end
        end
    end
end

local function af()
    for _, ad in ipairs(a:GetPlayers()) do
        if ad ~= g and ad.Character then
            local ae = ad.Character:FindFirstChild("Head")
            if ae and not ae:FindFirstChild("x3z9q") then
                local ag = Instance.new("BillboardGui")
                ag.Name = "x3z9q"
                ag.Adornee = ae
                ag.Size = UDim2.new(0, 80, 0, 25)
                ag.StudsOffset = Vector3.new(0, 2.5, 0)
                ag.AlwaysOnTop = true
                ag.Parent = ae
                local ah = Instance.new("TextLabel")
                ah.Size = UDim2.new(1, 0, 1, 0)
                ah.BackgroundTransparency = 1
                ah.Text = ad.Name
                ah.TextColor3 = Color3.fromRGB(255, 182, 193)
                ah.TextSize = 12
                ah.Font = Enum.Font.SourceSans
                ah.Parent = ag
                local ai = e.RenderStepped:Connect(function()
                    if not ad.Character or not ad.Character:FindFirstChild("Head") or not i.k then
                        pcall(function() ag:Destroy() ai:Disconnect() end)
                    end
                end)
                table.insert(m, ai)
            end
        end
    end
end

a.PlayerAdded:Connect(function(ad)
    if i.k then task.wait(math.random(800, 1200) / 1000) af() end
end)
g.CharacterAdded:Connect(function()
    if i.k then task.wait(math.random(800, 1200) / 1000) af() end
end)
for _, ad in ipairs(a:GetPlayers()) do
    if ad ~= g then
        ad.CharacterAdded:Connect(function()
            if i.k then task.wait(math.random(800, 1200) / 1000) af() end
        end)
    end
end

local aj = Instance.new("ScreenGui")
local ak = Instance.new("Frame")
local al = Instance.new("UICorner")
local am = Instance.new("TextButton")
local an = Instance.new("TextButton")
local ao = Instance.new("TextButton")
local aa = Instance.new("TextButton")
local ap = Instance.new("UICorner")
local aq = Instance.new("UICorner")
local ar = Instance.new("UICorner")
local as = Instance.new("UICorner")

aj.Parent = g:WaitForChild("PlayerGui", 5)
aj.Name = tostring(math.random(1e6, 1e7))
aj.ResetOnSpawn = false
aj.Enabled = false

ak.Size = UDim2.new(0, 100, 0, 120)
ak.Position = UDim2.new(0.15, 0, 0.25, 0)
ak.BackgroundColor3 = Color3.fromRGB(255, 179, 186)
ak.BackgroundTransparency = 0.3
ak.Active = true
ak.Draggable = true
ak.Parent = aj

al.CornerRadius = UDim.new(0, 8)
al.Parent = ak

am.Size = UDim2.new(0, 80, 0, 20)
am.Position = UDim2.new(0.1, 0, 0.06, 0)
am.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
am.Text = "Jump (" .. (n and "On" or "Off") .. ")"
am.TextColor3 = Color3.fromRGB(255, 255, 255)
am.TextSize = 12
am.Font = Enum.Font.SourceSans
am.Parent = ak

ap.CornerRadius = UDim.new(0, 8)
ap.Parent = am

an.Size = UDim2.new(0, 80, 0, 20)
an.Position = UDim2.new(0.1, 0, 0.28, 0)
an.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
an.Text = "Farm (" .. (i.j and "On" or "Off") .. ")"
an.TextColor3 = Color3.fromRGB(255, 255, 255)
an.TextSize = 12
an.Font = Enum.Font.SourceSans
an.Parent = ak

aq.CornerRadius = UDim.new(0, 8)
aq.Parent = an

ao.Size = UDim2.new(0, 80, 0, 20)
ao.Position = UDim2.new(0.1, 0, 0.5, 0)
ao.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ao.Text = "ESP (" .. (i.k and "On" or "Off") .. ")"
ao.TextColor3 = Color3.fromRGB(255, 255, 255)
ao.TextSize = 12
ao.Font = Enum.Font.SourceSans
ao.Parent = ak

ar.CornerRadius = UDim.new(0, 8)
ar.Parent = ao

aa.Size = UDim2.new(0, 80, 0, 20)
aa.Position = UDim2.new(0.1, 0, 0.72, 0)
aa.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
aa.Text = "Bhop (" .. (i.l and "On" or "Off") .. ")"
aa.TextColor3 = Color3.fromRGB(255, 255, 255)
aa.TextSize = 12
aa.Font = Enum.Font.SourceSans
aa.Parent = ak

as.CornerRadius = UDim.new(0, 8)
as.Parent = aa

am.MouseButton1Click:Connect(function()
    n = not n
    am.Text = "Jump (" .. (n and "On" or "Off") .. ")"
end)

an.MouseButton1Click:Connect(function()
    i.j = not i.j
    an.Text = "Farm (" .. (i.j and "On" or "Off") .. ")"
end)

ao.MouseButton1Click:Connect(function()
    i.k = not i.k
    ao.Text = "ESP (" .. (i.k and "On" or "Off") .. ")"
    if i.k then af() else ab() end
end)

aa.MouseButton1Click:Connect(function()
    i.l = not i.l
    aa.Text = "Bhop (" .. (i.l and "On" or "Off") .. ")"
end)

d.InputBegan:Connect(function(x, y)
    if y then return end
    if x.KeyCode == Enum.KeyCode.RightShift then
        aj.Enabled = not aj.Enabled
    end
end)

local function at()
    for _, ac in pairs(m) do pcall(function() ac:Disconnect() end) end
    m = {}
    pcall(function() aj:Destroy() end)
    i.j, i.k, i.l, n = false, false, false, false
end

game:BindToClose(at)
